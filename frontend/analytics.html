<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - CoHost Restaurant</title>
    <script src="js/config.js"></script>
    <script src="js/darkmode.js"></script>
    <script src="js/settings-manager.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/analytics.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<!-- App Header -->
<div class="app-header">
    <h1 id="restaurantName">CoHost Restaurant</h1>
</div>

<!-- Navigation with dark mode toggle -->
<div class="tabs-container">
    <div class="tabs">
        <a href="index.html" class="tab">Hosting</a>
        <a href="history.html" class="tab">History</a>
        <a href="analytics.html" class="tab active">Analytics</a>
        <a href="arrange.html" class="tab">Arrange</a>
        <a href="settings.html" class="tab">Settings</a>
    </div>
    <div class="theme-toggle-container">
        <button class="theme-toggle" id="themeToggle" title="Toggle Dark/Light Mode">dYOT</button>
    </div>
</div>

<!-- Main Content -->
<div class="analytics-container">
    <div class="analytics-header">
        <h2>Restaurant Analytics Dashboard</h2>
        <div class="date-range-selector">
            <select id="timeRange">
                <option value="7">Last 7 Days</option>
                <option value="14">Last 14 Days</option>
                <option value="30">Last 30 Days</option>
                <option value="90">Last 90 Days</option>
                <option value="365">Last Year</option>
            </select>
        </div>
    </div>

    <!-- Enhanced Professional Metrics Cards -->
    <div class="metrics-grid">
        <div class="analytics-card">
            <div class="metric-value" id="totalGuests">0</div>
            <div class="metric-label">Total Guests</div>
        </div>
        <div class="analytics-card">
            <div class="metric-value" id="totalParties">0</div>
            <div class="metric-label">Total Parties</div>
        </div>
        <div class="analytics-card">
            <div class="metric-value" id="avgPartySize">0.0</div>
            <div class="metric-label">Avg Party Size</div>
        </div>
        <div class="analytics-card">
            <div class="metric-value" id="avgWaitTime">0min</div>
            <div class="metric-label">Avg Wait Time</div>
        </div>
        <div class="analytics-card">
            <div class="metric-value" id="completedParties">0</div>
            <div class="metric-label">Completed Parties</div>
        </div>
        <div class="analytics-card">
            <div class="metric-value" id="cancelledParties">0</div>
            <div class="metric-label">Cancelled Parties</div>
        </div>
        <div class="analytics-card">
            <div class="metric-value" id="activeParties">0</div>
            <div class="metric-label">Active (waiting + seated)</div>
        </div>
        <div class="analytics-card">
            <div class="metric-value" id="peakHour">N/A</div>
            <div class="metric-label">Peak Hour</div>
        </div>
    </div>

    <!-- Enhanced Charts Section -->
    <div class="charts-grid">
        <div class="chart-card">
            <h3>Hourly Traffic</h3>
            <div class="chart-container">
                <canvas id="hourlyChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <h3>Daily Performance Trends</h3>
            <div class="chart-container">
                <canvas id="dailyChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <h3>Room Activity Distribution</h3>
            <div class="chart-container">
                <canvas id="occupancyChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <h3>State Breakdown</h3>
            <div class="chart-container">
                <canvas id="revenueChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Room Performance Dashboard -->
    <div class="room-metrics-section">
        <h3>Room Performance Dashboard</h3>
        <div class="room-metrics-grid" id="roomMetrics">
            <!-- Room metrics will be populated by JavaScript -->
        </div>
    </div>

    <!-- Enhanced AI Insights Panel -->
    <div class="insights-panel">
        <div class="insights-header">
            <h3>AI-Powered Business Insights</h3>
            <div class="insights-status" id="insightsStatus">
                <span class="status-disconnected">Waiting for data...</span>
            </div>
        </div>
        <div class="insights-content" id="insightsContent">
            <div class="insight-item">
                <div class="insight-icon">★</div>
                <div class="insight-text">
                    Insights will appear here once data loads.
                </div>
            </div>
        </div>
        <div class="insights-footer">
            <button class="btn btn-primary" id="refreshInsights">⟳ Refresh Insights</button>
            <div class="insights-timestamp">Last updated: <span id="lastUpdated">Loading...</span></div>
        </div>
    </div>
</div>

<script src="js/analytics.js"></script>
</body>
</html>
